# add the parameter: replied_to_uuid
mutation addMessage($user_uuid: uuid!, $room_uuid: uuid!, $content: String!, $replied_to_uuid: uuid) {
  insert_message_one(object: {
    user_uuid: $user_uuid,
    room_uuid: $room_uuid,
    content: $content,
    replied_to_uuid: $replied_to_uuid
  }) {
    uuid
  }
}

subscription getMessagesByRoom($room_uuid: uuid!) {
  message(where: {room_uuid: {_eq: $room_uuid}}) {
    uuid
    user {
      uuid
      username
    }
    content
    created_at

    # add: data of the replied message
    replied_to_message {
      content
      user {
        username
      }
    }
  }
}
