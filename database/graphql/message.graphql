mutation addMessage($user_uuid: uuid!, $room_uuid: uuid!, $content: String!) {
  insert_message_one(object: {user_uuid: $user_uuid, room_uuid: $room_uuid, content: $content}) {
    uuid
  }
}

subscription getMessagesByRoom($room_uuid: uuid!) {
  message(where: {room_uuid: {_eq: $room_uuid}}) {
    uuid
    user {
      uuid
      username
    }
    content
    created_at
  }
}


query getMessageByUser($user_uuid: uuid = "") {
  message(where: {user_uuid: {_eq: $user_uuid}}) {
    user_uuid
    room_uuid
    content
  }
}

#痕迹抹除
mutation deleteMessageByUsername($user_uuid: uuid = "") {
  delete_message(where: {user_uuid: {_eq: $user_uuid}}) {
    affected_rows
    returning {
      content
      user_uuid
    }
  }
}
